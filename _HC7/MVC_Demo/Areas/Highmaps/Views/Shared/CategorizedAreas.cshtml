@*You need to add a reference to jQuery prior to referencing the highcharts javascript file*@

<script src="http://code.highcharts.com/maps/highmaps.js"></script>

@* Additional chart types, such as "heatmap", are defined in the heatmap.js module *@

<!--<script src="http://code.highcharts.com/modules/heatmap.js"></script>-->

@using Highsoft.Web.Mvc.Maps

<script type="text/javascript">

    function formatTooltip() {
        return '<b>' + this.series.xAxis.categories[this.point.x] + '</b> sold <br><b>' +
                   this.point.value + '</b> items on <br><b>' + this.series.yAxis.categories[this.point.y] + '</b>';
    }

</script>

    @(Html.Highsoft().Highmaps(
        new Highmaps
        {
            Chart = new Chart
            {
                SpacingBottom = 20
            },
            Title = new Title
            {
                Text = "Europe time zones"
            },
            Legend = new Legend
            {
                Enabled = true
            },
            Tooltip = new Tooltip
            {
                HeaderFormat = "",
                PointFormat = "{point.name}: <b> {series.name}</b>"
            },
            PlotOptions = new PlotOptions
            {
                Map = new PlotOptionsMap
                {
                    AllAreas = false,
                    JoinBy = { "iso-a2", "code" },
                    DataLabels = new PlotOptionsMapDataLabels
                    {
                        Enabled = true,
                        Color = "#FFFFFF",
                        Formatter = "function () { if (this.point.properties && this.point.properties.labelrank.toString() < 5) { return this.point.properties['iso-a2']; }",
                        Format = null
                    }
                }
            }
            //Series = new List<MapSeries>
            //{
            //    new MapSeries { Name = "UTC", Data = {new MapSeriesData { Name = "IE"} } }
            //}

        , "Map")//"chart"
    )